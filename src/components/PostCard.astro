---
import type { CollectionEntry } from 'astro:content'
import FormattedDate from '@/components/FormattedDate'
import ArrowUp from '@/components/icons/ArrowUp'
import { getPostSlug } from '@/utils'

type Props = {
	post: CollectionEntry<'posts'>
	readTime: string
}

const { post, readTime } = Astro.props as Props
const { data } = post
const slug = getPostSlug(post)
const href = `/post/${slug}/`
const heroImage = data.image ?? '/project.png'
const imageAlt = data.image_alt ?? `Hero image for ${data.title}`
const categoryLabel = data.category
---

<article class='flex flex-col overflow-hidden rounded-2xl border border-zinc-200 bg-white shadow-sm transition hover:-translate-y-1 hover:shadow-lg dark:border-zinc-800 dark:bg-[#0f0e15]'>
	<a class='relative block h-64 overflow-hidden' href={href}>
		<img
			src={heroImage}
			alt={imageAlt}
			loading='lazy'
			class='h-full w-full object-cover transition duration-500 ease-out hover:scale-105'
		/>
		<div class='absolute inset-x-0 bottom-0 flex items-center justify-between bg-gradient-to-t from-black/80 to-black/0 px-5 pb-4 text-white text-xs uppercase tracking-wider'>
			<div class='flex flex-col text-left text-xs'>
				<span class='font-semibold'>{categoryLabel}</span>
				<FormattedDate date={data.date} />
			</div>
			<span class='font-semibold'>{readTime}</span>
		</div>
	</a>

	<div class='flex flex-1 flex-col gap-4 p-6'>
		<div class='flex flex-col gap-3'>
			<a class='text-2xl font-semibold leading-tight text-zinc-900 dark:text-white' href={href}>
				{data.title}
			</a>
			<p class='line-clamp-3 text-base text-zinc-600 dark:text-zinc-300'>{data.description}</p>
		</div>
		<footer class='mt-auto flex justify-between items-center pt-2'>
			<a
				href={href}
				class='flex items-center text-sm font-semibold uppercase tracking-wide text-indigo-600 transition hover:translate-x-1 dark:text-indigo-400'
				aria-label={`Read ${data.title}`}
			>
				Read Post
				<span class='ml-2 mt-[1px] transition-transform duration-200 group-hover:rotate-45'>
					<ArrowUp width='18' height='18' />
				</span>
			</a>
		</footer>
	</div>
</article>
